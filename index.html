<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Voca Han&Hyo</title>
<link rel="icon" href="logo.png"/>

<style>
@font-face{
  font-family:'GabiaSai';
  src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2510-1@1.0/GabiaSai-Regular.woff2')format('woff2');
  font-weight:normal;font-display:swap;
}
:root{
  --primary:#58CC02;--accent:#FFD166;--info:#3A86FF;
  --good:#A7E9AF;--bad:#F7A8A8;--bg:#F7FAF7;--text:#233042;
  --br:#E6EFE5;--shadow:0 6px 18px rgba(0,0,0,.08);
}
body{margin:0;background:var(--bg);color:var(--text);font-family:'GabiaSai',system-ui,-apple-system,Segoe UI,Noto Sans KR,sans-serif;}
.container{max-width:900px;margin:0 auto;padding:16px 16px 120px}
.hidden{display:none!important}
.center{display:grid;place-items:center}
.spinner{width:48px;height:48px;border:5px solid #e6f4e5;border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.appbar{position:sticky;top:0;z-index:20;display:flex;align-items:center;justify-content:center;background:#fff;border-bottom:1px solid #eee;font-size:22px;font-weight:800;padding:10px;cursor:pointer}
.view{display:none}.view.active{display:block}

/* Home */
.home-wrap{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:70vh;text-align:center}
.home-logo img{width:180px;height:180px;margin-bottom:18px;border-radius:24px;box-shadow:var(--shadow)}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px;width:100%;max-width:460px}
.card{background:#fff;border-radius:16px;padding:22px;box-shadow:var(--shadow);border:1px solid var(--br);
display:flex;align-items:center;justify-content:center;font-weight:800;font-size:26px;cursor:pointer}

/* Stage */
.stage-wrap{max-width:520px;margin:0 auto;min-height:70vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}
.stage-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:8px;width:100%}
.stage{background:#fff;border-radius:10px;padding:12px;box-shadow:0 4px 12px rgba(0,0,0,.06);border:1px solid var(--br);font-size:15px;cursor:pointer;min-height:56px;width:100%}
.flag-row{display:flex;gap:10px;justify-content:center;align-items:center;margin-top:14px}
.flag{border:1px solid var(--br);background:#fff;box-shadow:var(--shadow);padding:8px 12px;border-radius:12px;cursor:pointer}
.flag.active{outline:3px solid var(--primary)}

/* Feedback */
.timer-area{margin:6px 0 10px}
.timer{text-align:center;font-weight:800;font-size:15px}
.timebar-wrap{height:10px;background:#E3EDFF;border:1px solid #CFE0FF;border-radius:999px;overflow:hidden;margin-top:6px}
.timebar{height:10px;background:linear-gradient(90deg,var(--info),#80b7ff);width:100%}
.feedback-slot{height:40px;display:flex;align-items:center;justify-content:center;margin-top:8px}
.feedback{visibility:hidden;opacity:0;transition:opacity .18s;max-width:520px;padding:8px 12px;border-radius:12px;box-shadow:var(--shadow);font-weight:800;font-size:14px;text-align:center}
.feedback.ok{background:#eaf8e0;color:#2d7d00;border:1px solid #cdecbc}
.feedback.bad{background:#ffe7ea;color:#b33444;border:1px solid #ffc8d0}
.feedback.show{visibility:visible;opacity:1}

/* Quiz */
.quiz-wrap{display:flex;align-items:center;justify-content:center;min-height:60vh}
.quiz-card{position:relative;background:#fff;border-radius:16px;border:1px solid var(--br);box-shadow:var(--shadow);
padding:22px;max-width:520px;width:100%;text-align:center;overflow:hidden;transition:transform .15s}
.quiz-card.shake{animation:shake .3s}
@keyframes shake{0%,100%{transform:translateX(0);}20%,60%{transform:translateX(-8px);}40%,80%{transform:translateX(8px);}}
.quiz-card.flash-correct{animation:flashGreen 0.7s ease}
@keyframes flashGreen{
  0%{background:#fff;}
  25%{background:#d4f8c4;}
  50%{background:#c3f2b2;}
  75%{background:#d4f8c4;}
  100%{background:#fff;}
}
.quiz-progress{font-weight:900;margin-bottom:8px}
.q-target-wrap{width:100%;display:flex;align-items:center;justify-content:center;min-height:90px}
.q-target{font-weight:900;line-height:1.1;max-width:100%;white-space:nowrap;font-size:54px}
.input-row{display:flex;gap:8px;align-items:center;justify-content:center;margin-top:10px}
.input-row input{flex:1;padding:12px 14px;border:1px solid #ccc;border-radius:12px;font-size:17px}
.btn-sm{flex:1;border:none;border-radius:12px;padding:14px 0;font-weight:700;font-size:18px;cursor:pointer;transition:.2s}
.btn-submit{background:#58CC02;color:#fff}
.btn-hint{background:#FFD166;color:#222}
.hint{background:#FFF8EC;border:1px dashed #FFD166;padding:10px;border-radius:10px;margin-top:12px;font-size:14px;display:none}
.star{position:absolute;pointer-events:none;opacity:0;transform:scale(.6);animation:pop .8s ease forwards}
@keyframes pop{0%{opacity:0;transform:translateY(10px) scale(.6)}10%{opacity:1;transform:translateY(0) scale(1)}80%{opacity:1}100%{opacity:0;transform:translateY(-20px) scale(1.1)}}
</style>
</head>
<body>
<div class="appbar" id="titleBtn">Voca Han&Hyo</div>

<div id="loader" class="center" style="height:60vh"><div class="spinner"></div></div>

<div id="app" class="container hidden">
  <section id="homeView" class="view active">
    <div class="home-wrap">
      <div class="home-logo"><img src="logo.png" alt="logo"></div>
      <div class="grid2">
        <button class="card" id="goStudy">üìò STUDY</button>
        <button class="card" id="goQuiz">üìù QUIZ</button>
      </div>
    </div>
  </section>

  <!-- Quiz -->
  <section id="quizView" class="view">
    <div class="timer-area">
      <div class="timer" id="quizTimer">ÎÇ®ÏùÄ ÏãúÍ∞Ñ: 30:00</div>
      <div class="timebar-wrap"><div id="quizBar" class="timebar"></div></div>
      <div class="feedback-slot"><div id="quizFeedback" class="feedback"></div></div>
    </div>
    <div class="quiz-wrap">
      <div class="quiz-card" id="quizCard">
        <div class="quiz-progress" id="qProgress">1/150</div>
        <div class="q-target-wrap"><div class="q-target" id="qTarget">‚Äî</div></div>
        <div class="input-row">
          <input id="qInput" placeholder="Ï†ïÎãµ ÏûÖÎ†•"/>
        </div>
        <div class="input-row">
          <button class="btn-sm btn-submit" id="qSubmit">Ï†úÏ∂ú</button>
          <button class="btn-sm btn-hint" id="qHintBtn">ÌûåÌä∏</button>
        </div>
        <div class="hint" id="qHint">ÏòàÎ¨∏</div>
      </div>
    </div>
  </section>
</div>

<script>
const el=id=>document.getElementById(id);

/* ÏÇ¨Ïö¥Îìú ÌååÏùº */
const sounds={
  correct:new Audio('/sounds/correct.wav'),
  wrong:new Audio('/sounds/wrong.wav'),
  continuous:new Audio('/sounds/continuous.wav')
};
Object.values(sounds).forEach(a=>{a.preload='auto';a.volume=0.9;});
function playSound(type){const a=sounds[type];if(a){a.currentTime=0;a.play().catch(()=>{});}}

/* Î≥Ñ Ïù¥ÌéôÌä∏ */
function burstStars(container,count=6){
  for(let i=0;i<count;i++){
    const s=document.createElement('div');s.className='star';s.textContent='‚≠ê';
    const x=20+Math.random()*60;const y=20+Math.random()*40;
    s.style.left=x+'%';s.style.top=y+'%';s.style.fontSize=(18+Math.random()*8)+'px';
    container.appendChild(s);setTimeout(()=>s.remove(),800);
  }
}

/* ÌîºÎìúÎ∞± */
function feedback(node,ok,msg){
  node.textContent=msg||(ok?'Ï†ïÎãµ!':'Ïò§Îãµ');
  node.classList.remove('ok','bad','show');
  node.classList.add(ok?'ok':'bad','show');
  clearTimeout(node._t);
  node._t=setTimeout(()=>node.classList.remove('show'),1200);
}

/* Îç∞Ïù¥ÌÑ∞ ÏÉòÌîå */
const quizData=[
  {word:"enthusiastic",meaning:"Ïó¥Í¥ëÏ†ÅÏù∏, Ïó¥Î†¨Ìïú",ex:"The audience was enthusiastic about the show."},
  {word:"abandon",meaning:"Î≤ÑÎ¶¨Îã§, Ìè¨Í∏∞ÌïòÎã§",ex:"He had to abandon his plan."},
  {word:"ability",meaning:"Îä•Î†•",ex:"She has the ability to lead."}
];

let idx=0,qMode='KO2EN',qItem=null,streak=0;

function renderQuiz(){
  const it=quizData[idx%quizData.length];
  qItem=it;qMode=Math.random()<0.5?'KO2EN':'EN2KO';
  el('qTarget').textContent=qMode==='KO2EN'?it.meaning:it.word;
  el('qHint').textContent=it.ex;el('qInput').value='';
}
renderQuiz();

/* Ï†úÏ∂ú */
function submitQuiz(){
  const val=(el('qInput').value||'').trim();
  const card=el('quizCard');
  let ok=false;
  if(qMode==='KO2EN'){ok=val.toLowerCase()===qItem.word.toLowerCase();}
  else{ok=val.replace(/\s+/g,'')===qItem.meaning.replace(/\s+/g,'');}

  if(ok){
    streak++;
    feedback(el('quizFeedback'),true,'Ï†ïÎãµ!');
    playSound(streak>=3?'continuous':'correct');
    card.classList.remove('flash-correct');
    void card.offsetWidth;
    card.classList.add('flash-correct');
    if(streak>=3) burstStars(card);
  }else{
    streak=0;
    feedback(el('quizFeedback'),false,'Ï†ïÎãµ: '+(qMode==='KO2EN'?qItem.word:qItem.meaning));
    playSound('wrong');
    card.classList.remove('shake');void card.offsetWidth;card.classList.add('shake');
  }
  idx++;renderQuiz();
}

el('qSubmit').onclick=submitQuiz;
el('qInput').addEventListener('keydown',e=>{if(e.key==='Enter')submitQuiz();});
el('qHintBtn').onclick=()=>{const h=el('qHint');h.style.display=h.style.display==='none'?'block':'none';};
</script>
</body>
</html>
